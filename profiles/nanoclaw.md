# NanoClaw CKP Compatibility Assessment

**Date:** 2026-02-24  
**Assessed by:** @clawkernel/ckp-test v0.2.0  
**CKP version:** 0.2.0  
**Source:** https://github.com/qwibitai/nanoclaw

---

## Status

NanoClaw now has two documented interoperability views:

1. **Native architecture assessment** (without CKP wire adapter)
2. **Live CKP bridge conformance run** (with `src/ckp-bridge.ts`)

This document includes both so there is no ambiguity between architectural mapping and protocol-level evidence.

---

## Live Conformance (CKP Bridge)

**Bridge entrypoint:** `/Users/agc/Documents/nanoclaw/src/ckp-bridge.ts`  
**Target command:** `node /Users/agc/Documents/nanoclaw/dist/ckp-bridge.js`

### Core CKP vectors (31)

Run:

```bash
node /Users/agc/Documents/ckp-test/dist/cli.js run \
  --target "node /Users/agc/Documents/nanoclaw/dist/ckp-bridge.js" \
  --manifest /Users/agc/Documents/clawkernel/profiles/nanoclaw.claw.yaml \
  --output /Users/agc/Documents/clawkernel/profiles/nanoclaw-live-report.md
```

Result:

- **L1:** 13/13 — **CONFORMANT**
- **L2:** 9/10 — **PARTIAL** (official scenario skip `TV-L2-07`)
- **L3:** 8/8 — **CONFORMANT**
- **Overall:** **L3 PARTIAL**

Report: `profiles/nanoclaw-live-report.md`

### CKP-A2A compatibility vectors (8)

Run:

```bash
node /Users/agc/Documents/ckp-test/dist/cli.js a2a \
  --target "node /Users/agc/Documents/nanoclaw/dist/ckp-bridge.js" \
  --output /Users/agc/Documents/clawkernel/profiles/nanoclaw-a2a-live-report.md
```

Result:

- **PASS:** 8
- **FAIL:** 0
- **SKIP:** 0
- **ERROR:** 0
- **Overall:** **A2A-COMPATIBLE**

Report: `profiles/nanoclaw-a2a-live-report.md`

---

## Native NanoClaw Mapping (Without CKP Bridge)

| CKP Primitive | NanoClaw Equivalent | Status | Key Files |
|---|---|---|---|
| **Identity** | `CLAUDE.md` per group + `ASSISTANT_NAME` env var + `config.ts` | **Implemented** | `groups/*/CLAUDE.md`, `src/config.ts` |
| **Provider** | Claude Agent SDK (`@anthropic-ai/claude-agent-sdk`) | **Implemented** | `container/agent-runner/src/index.ts` |
| **Channel** | WhatsApp via baileys + extensible via skills | **Implemented** | `src/channels/whatsapp.ts` |
| **Tool** | SDK built-in tools (bash, web, files) + browser automation | **Implemented** | `container/agent-runner/`, `container/skills/agent-browser/` |
| **Skill** | Skills engine with YAML manifests + code transforms | **Implemented** | `skills-engine/`, `.claude/skills/` |
| **Memory** | 3-tier: SQLite + CLAUDE.md + filesystem per group | **Implemented** | `src/db.ts`, `groups/*/CLAUDE.md` |
| **Sandbox** | Docker / Apple Container with mount security | **Implemented** | `src/container-runner.ts`, `src/mount-security.ts` |
| **Policy** | Implicit role-based (main=admin, others=isolated) | **Partial** | `src/group-folder.ts`, `src/ipc.ts` |
| **Swarm** | Agent Teams via SDK (per-group, not cross-container) | **Partial** | `container/agent-runner/src/index.ts` |

**Primitive coverage (native):** 7/9 Implemented, 2/9 Partial

---

## Method Compatibility Notes

### Native runtime (without bridge)

NanoClaw natively exposes WhatsApp + internal container orchestration, not CKP JSON-RPC. So CKP methods are **mapped conceptually** but not wire-compatible by default.

### With CKP bridge enabled

`src/ckp-bridge.ts` exposes CKP methods over stdio JSON-RPC and covers:

- L1 lifecycle: `claw.initialize`, `claw.initialized`, `claw.status`, `claw.shutdown`, `claw.heartbeat`
- L2 tools: `claw.tool.call`, `claw.tool.approve`, `claw.tool.deny`
- L3 memory/swarm: `claw.memory.*`, `claw.swarm.*`
- A2A task bridge: `claw.task.create/get/list/cancel/subscribe`

---

## Artifact Index

- Manifest profile: `profiles/nanoclaw.claw.yaml`
- Manifest-only report: `profiles/nanoclaw-report.md`
- Live CKP run: `profiles/nanoclaw-live-report.md`
- Live CKP-A2A run: `profiles/nanoclaw-a2a-live-report.md`

---

*Generated by CKP compatibility and conformance workflow.*
